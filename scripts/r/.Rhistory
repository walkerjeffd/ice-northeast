df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
aes(y = min_temp),
color = "red"
) +
geom_point(
data = df_day,
aes(y = median_temp),
color = "blue"
) +
scale_x_datetime(limits = ymd(c(20171201, 20171231)))
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
aes(y = min_temp),
color = "red"
) +
geom_point(
data = df_day,
aes(y = median_temp),
color = "blue"
) +
scale_x_datetime(limits = ymd_hm(c(2017120100, 2017123100)))
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
aes(y = min_temp),
color = "red"
) +
geom_point(
data = df_day,
aes(y = median_temp),
color = "blue"
) +
scale_x_datetime(limits = ymd_hm(c(201712010000, 201712310000)))
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
aes(y = min_temp),
color = "red"
) +
geom_point(
data = df_day,
aes(y = median_temp),
color = "blue"
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df %>%
mutate(
date = as.Date(timestamp)
) %>%
group_by(date) %>%
mutate(
min_temp = min(temp),
max_temp = max(temp)
),
color = "red"
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df %>%
mutate(
date = as.Date(timestamp)
) %>%
group_by(date) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = min_temp
),
color = "red"
)
df %>%
mutate(
date = as.Date(timestamp)
) %>%
group_by(date) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
)
df %>%
mutate(
date = as.Date(timestamp)
) %>%
group_by(date) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = min_temp
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(date) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = min_temp
),
color = "red"
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = min_temp
),
color = "red"
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 10 & month(timestamp) <= 5, max_temp, min_temp)
),
color = "red"
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 10 | month(timestamp) <= 5, max_temp, min_temp)
),
color = "red"
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 10 | month(timestamp) <= 6, max_temp, min_temp)
),
color = "red"
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 10 | month(timestamp) <= 3, max_temp, min_temp)
),
color = "red"
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 10 | month(timestamp) <= 4, max_temp, min_temp)
),
color = "red"
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 10 | month(timestamp) <= 3, max_temp, min_temp)
),
color = "red"
)
df_day <- df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 10 | month(timestamp) <= 3, max_temp, min_temp)
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
color = "red"
) +
geom_smooth(
data = df_day
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
color = "red"
) +
geom_smooth(
data = df_day, span = 0.2
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
color = "red"
) +
geom_smooth(
data = df_day, span = 0.2
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
color = "red"
) +
geom_smooth(
data = df_day, span = 0.3
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
color = "red"
) +
geom_smooth(
data = df_day, span = 0.1
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
color = "red"
)
df_day <- df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 10 | month(timestamp) <= 3, max_temp, min_temp)
) %>%
arrange(timestamp)
df_day <- df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 11 | month(timestamp) <= 3, max_temp, min_temp)
) %>%
arrange(timestamp)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
color = "red"
)
df_day <- df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 10 | month(timestamp) <= 3, max_temp, min_temp)
) %>%
arrange(timestamp)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
color = "red"
)
df_day <- df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 10 | month(timestamp) <= 3, max_temp, min_temp)
) %>%
mutate(
timestamp = floor_date(timestamp, unit = "month")
) %>%
group_by(timestamp) %>%
summarise(
temp = median(temp)
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
color = "red"
)
df_day <- df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 10 | month(timestamp) <= 3, max_temp, min_temp)
)
df_mon <- df_day %>%
mutate(
timestamp = floor_date(timestamp, unit = "month")
) %>%
group_by(timestamp) %>%
summarise(
temp = median(temp)
)
df_mon <- df_day %>%
mutate(
timestamp = floor_date(timestamp, unit = "month")
) %>%
group_by(timestamp) %>%
mutate(
temp = median(temp)
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
color = "red"
) +
geom_point(
data = df_mon,
color = "blue"
)
df_mon <- df_day %>%
mutate(
monthyear = floor_date(timestamp, unit = "month")
) %>%
group_by(monthyear) %>%
mutate(
temp = median(temp)
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
color = "red"
) +
geom_point(
data = df_mon,
color = "blue"
)
df <- read_csv("~/Desktop/kent island.csv") %>%
mutate(timestamp = mdy_hm(timestamp)) %>%
filter(!is.na(temp))
df_day <- df %>%
mutate(
timestamp = floor_date(timestamp, unit = "day")
) %>%
group_by(timestamp) %>%
summarise(
min_temp = min(temp),
max_temp = max(temp)
) %>%
mutate(
temp = if_else(month(timestamp) >= 10 | month(timestamp) <= 3, max_temp, min_temp)
)
df_mon <- df_day %>%
mutate(
monthyear = floor_date(timestamp, unit = "month")
) %>%
group_by(monthyear) %>%
mutate(
temp = median(temp)
)
df %>%
ggplot(aes(timestamp, temp)) +
geom_line() +
geom_point(
data = df_day,
color = "red"
) +
geom_point(
data = df_mon,
color = "blue"
)
library(tidyverse)
library(tidyverse)
x <- read_csv("~/Downloads/dataset-20181025.csv")
x %>% select(featureid, huc12, state = stusps) %>% head
x %>% select(featureid, huc12, state = stusps, area_km2 = AreaSqKM, elevation) %>% head
x %>% select(featureid, huc12, state = stusps, area_km2 = AreaSqKM, elevation, forest) %>% head
x %>% select(featureid, huc12, state = stusps, area_km2 = AreaSqKM, elevation, forest) %>% mutate(featureid = sprintf('%.0f', featureid)) %>% head
x %>% select(featureid, huc12, state = stusps, area_km2 = AreaSqKM, elevation, forest) %>% mutate(featureid = sprintf('%.0f', featureid)) %>% write_csv("~/dataset.csv")
x %>% select(featureid, huc12, state = stusps, area_km2 = AreaSqKM, elevation, forest) %>% mutate(featureid = sprintf('%.0f', featureid)) %>% summary
x %>% select(featureid, huc12, state = stusps, area_km2 = AreaSqKM, elevation, forest) %>% mutate(featureid = sprintf('%.0f', featureid)) %>% filter(is.na(forest))
head(x)
x %>% select(featureid, huc12, state = stusps, area_km2 = AreaSqKM, elevation, forest) %>% mutate(featureid = sprintf('%.0f', featureid)) %>% write_csv("~/huc12.csv")
x %>% mutate(huc8 = str_sub(huc12, 1, 8)) %>% select(featureid, huc8, state = stusps, area_km2 = AreaSqKM, elevation, forest) %>% mutate(featureid = sprintf('%.0f', featureid)) %>% write_csv("~/huc8.csv")
x %>% mutate(huc6 = str_sub(huc6, 1, 6)) %>% select(featureid, huc6, state = stusps, area_km2 = AreaSqKM, elevation, forest) %>% mutate(featureid = sprintf('%.0f', featureid)) %>% write_csv("~/huc6.csv")
x %>% mutate(huc6 = str_sub(huc12, 1, 6)) %>% select(featureid, huc6, state = stusps, area_km2 = AreaSqKM, elevation, forest) %>% mutate(featureid = sprintf('%.0f', featureid)) %>% write_csv("~/huc6.csv")
library(sf)
st_read("PG:host=trout.local dbname=sheds")
st_read("PG:host=trout.local,dbname=sheds")
setwd("~/Projects/sheds/ice/ice-sheds/scripts/r")
